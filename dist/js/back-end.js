"use strict";function startNewGame(s,r,l,i){db.get("rooms/".concat(s)).then(function(t){var o=t.val();c(1),1==r?db.getting("rooms/".concat(s),function(t){$(".player-two-score .score").text(t.val().playerTwoScore)}):2==r&&db.getting("rooms/".concat(s),function(t){$(".player-one-score .score").text(t.val().playerOneScore)});var n=11,e=setInterval(function(){n--,$(".timer").html("0:".concat(n,' <i class="far fa-clock"></i>')),0==n&&(clearInterval(e),n=11,c(2))},1e3);function c(t){function e(){$(".options span").click(function(){if($(this).hasClass("correct")&&!$(this).hasClass("end")){if($(this).css({color:"#FFFFFF","background-color":"green"}),$(".options span").removeClass("correct").addClass("end"),1==r){var t=Number($(".player-one-score .score").text());$(".player-one-score .score").text(t+10),db.update("rooms/".concat(s),{playerOneScore:t+10})}else if(2==r){t=Number($(".player-two-score .score").text());$(".player-two-score .score").text(t+10),db.update("rooms/".concat(s),{playerTwoScore:t+10})}}else $(this).hasClass("correct")||$(this).hasClass("end")||($(this).css({color:"#FFFFFF","background-color":"red"}),$(".options span").removeClass("correct").addClass("end"))})}if($(".options span").removeClass("correct").removeClass("end").css({color:"#000000","background-color":"rgb(233, 232, 232)"}),1==t)$(".questionNumber").html("".concat(t,'<i class="fas fa-hashtag fa-sm"></i>')),$(".question").text(o.q1.question),$(".optOne").text(o.q1.answers[0]),$(".optTwo").text(o.q1.answers[1]),$(".optThree").text(o.q1.answers[2]),$(".optFour").text(o.q1.answers[3]),$(".optOne").text()==o.q1.correct?$(".optOne").addClass("correct"):$(".optTwo").text()==o.q1.correct?$(".optTwo").addClass("correct"):$(".optThree").text()==o.q1.correct?$(".optThree").addClass("correct"):$(".optFour").text()==o.q1.correct&&$(".optFour").addClass("correct"),e();else if(2==t){$(".questionNumber").html("".concat(t,'<i class="fas fa-hashtag fa-sm"></i>')),$(".question").text(o.q2.question),$(".optOne").text(o.q2.answers[0]),$(".optTwo").text(o.q2.answers[1]),$(".optThree").text(o.q2.answers[2]),$(".optFour").text(o.q2.answers[3]),$(".optOne").text()==o.q2.correct?$(".optOne").addClass("correct"):$(".optTwo").text()==o.q2.correct?$(".optTwo").addClass("correct"):$(".optThree").text()==o.q2.correct?$(".optThree").addClass("correct"):$(".optFour").text()==o.q2.correct&&$(".optFour").addClass("correct"),e();var a=setInterval(function(){n--,$(".timer").html("0:".concat(n,' <i class="far fa-clock"></i>')),0==n&&(clearInterval(a),n=11,c(3))},1e3)}else if(3==t){$(".questionNumber").html("".concat(t,'<i class="fas fa-hashtag fa-sm"></i>')),$(".question").text(o.q3.question),$(".optOne").text(o.q3.answers[0]),$(".optTwo").text(o.q3.answers[1]),$(".optThree").text(o.q3.answers[2]),$(".optFour").text(o.q3.answers[3]),$(".optOne").text()==o.q3.correct?$(".optOne").addClass("correct"):$(".optTwo").text()==o.q3.correct?$(".optTwo").addClass("correct"):$(".optThree").text()==o.q3.correct?$(".optThree").addClass("correct"):$(".optFour").text()==o.q3.correct&&$(".optFour").addClass("correct"),e();a=setInterval(function(){n--,$(".timer").html("0:".concat(n,' <i class="far fa-clock"></i>')),0==n&&(clearInterval(a),n=11,c(4))},1e3)}else if(4==t){$(".questionNumber").html("".concat(t,'<i class="fas fa-hashtag fa-sm"></i>')),$(".question").text(o.q4.question),$(".optOne").text(o.q4.answers[0]),$(".optTwo").text(o.q4.answers[1]),$(".optThree").text(o.q4.answers[2]),$(".optFour").text(o.q4.answers[3]),$(".optOne").text()==o.q4.correct?$(".optOne").addClass("correct"):$(".optTwo").text()==o.q4.correct?$(".optTwo").addClass("correct"):$(".optThree").text()==o.q4.correct?$(".optThree").addClass("correct"):$(".optFour").text()==o.q4.correct&&$(".optFour").addClass("correct"),e();a=setInterval(function(){n--,$(".timer").html("0:".concat(n,' <i class="far fa-clock"></i>')),0==n&&(clearInterval(a),n=11,c(5))},1e3)}else if(5==t){$(".questionNumber").html("".concat(t,'<i class="fas fa-hashtag fa-sm"></i>')),$(".question").text(o.q5.question),$(".optOne").text(o.q5.answers[0]),$(".optTwo").text(o.q5.answers[1]),$(".optThree").text(o.q5.answers[2]),$(".optFour").text(o.q5.answers[3]),$(".optOne").text()==o.q5.correct?$(".optOne").addClass("correct"):$(".optTwo").text()==o.q5.correct?$(".optTwo").addClass("correct"):$(".optThree").text()==o.q5.correct?$(".optThree").addClass("correct"):$(".optFour").text()==o.q5.correct&&$(".optFour").addClass("correct"),e();a=setInterval(function(){n--,$(".timer").html("0:".concat(n,' <i class="far fa-clock"></i>')),0==n&&(clearInterval(a),n=11,c(6))},1e3)}else if(6==t){$(".questionNumber").html("".concat(t,'<i class="fas fa-hashtag fa-sm"></i>')),$(".question").text(o.q6.question),$(".optOne").text(o.q6.answers[0]),$(".optTwo").text(o.q6.answers[1]),$(".optThree").text(o.q6.answers[2]),$(".optFour").text(o.q6.answers[3]),$(".optOne").text()==o.q6.correct?$(".optOne").addClass("correct"):$(".optTwo").text()==o.q6.correct?$(".optTwo").addClass("correct"):$(".optThree").text()==o.q6.correct?$(".optThree").addClass("correct"):$(".optFour").text()==o.q6.correct&&$(".optFour").addClass("correct"),e();a=setInterval(function(){n--,$(".timer").html("0:".concat(n,' <i class="far fa-clock"></i>')),0==n&&(clearInterval(a),n=11,c(7))},1e3)}else if(7==t){$(".questionNumber").html("".concat(t,'<i class="fas fa-hashtag fa-sm"></i>')),$(".question").text(o.q7.question),$(".optOne").text(o.q7.answers[0]),$(".optTwo").text(o.q7.answers[1]),$(".optThree").text(o.q7.answers[2]),$(".optFour").text(o.q7.answers[3]),$(".optOne").text()==o.q7.correct?$(".optOne").addClass("correct"):$(".optTwo").text()==o.q7.correct?$(".optTwo").addClass("correct"):$(".optThree").text()==o.q7.correct?$(".optThree").addClass("correct"):$(".optFour").text()==o.q7.correct&&$(".optFour").addClass("correct"),e();a=setInterval(function(){n--,$(".timer").html("0:".concat(n,' <i class="far fa-clock"></i>')),0==n&&(clearInterval(a),n=11,c(8))},1e3)}else if(8==t){$(".questionNumber").html("".concat(t,'<i class="fas fa-hashtag fa-sm"></i>')),$(".question").text(o.q8.question),$(".optOne").text(o.q8.answers[0]),$(".optTwo").text(o.q8.answers[1]),$(".optThree").text(o.q8.answers[2]),$(".optFour").text(o.q8.answers[3]),$(".optOne").text()==o.q8.correct?$(".optOne").addClass("correct"):$(".optTwo").text()==o.q8.correct?$(".optTwo").addClass("correct"):$(".optThree").text()==o.q8.correct?$(".optThree").addClass("correct"):$(".optFour").text()==o.q8.correct&&$(".optFour").addClass("correct"),e();a=setInterval(function(){n--,$(".timer").html("0:".concat(n,' <i class="far fa-clock"></i>')),0==n&&(clearInterval(a),n=11,c(9))},1e3)}else if(9==t){$(".questionNumber").html("".concat(t,'<i class="fas fa-hashtag fa-sm"></i>')),$(".question").text(o.q9.question),$(".optOne").text(o.q9.answers[0]),$(".optTwo").text(o.q9.answers[1]),$(".optThree").text(o.q9.answers[2]),$(".optFour").text(o.q9.answers[3]),$(".optOne").text()==o.q9.correct?$(".optOne").addClass("correct"):$(".optTwo").text()==o.q9.correct?$(".optTwo").addClass("correct"):$(".optThree").text()==o.q9.correct?$(".optThree").addClass("correct"):$(".optFour").text()==o.q9.correct&&$(".optFour").addClass("correct"),e();a=setInterval(function(){n--,$(".timer").html("0:".concat(n,' <i class="far fa-clock"></i>')),0==n&&(clearInterval(a),n=11,c(10))},1e3)}else if(10==t){$(".questionNumber").html("".concat(t,'<i class="fas fa-hashtag fa-sm"></i>')),$(".question").text(o.q10.question),$(".optOne").text(o.q10.answers[0]),$(".optTwo").text(o.q10.answers[1]),$(".optThree").text(o.q10.answers[2]),$(".optFour").text(o.q10.answers[3]),$(".optOne").text()==o.q10.correct?$(".optOne").addClass("correct"):$(".optTwo").text()==o.q10.correct?$(".optTwo").addClass("correct"):$(".optThree").text()==o.q10.correct?$(".optThree").addClass("correct"):$(".optFour").text()==o.q10.correct&&$(".optFour").addClass("correct"),e();a=setInterval(function(){n--,$(".timer").html("0:".concat(n,' <i class="far fa-clock"></i>')),0==n&&(clearInterval(a),function(t,e){if($(".game").hide(),$(".game-end").show(),1==r){$(".p1result i.addThisFriend").remove(),$(".p2result i.meUser").remove(),$(".p2result").attr("id",e);var a=Number($(".player-one-score .score").text()),o=Number($(".player-two-score .score").text());o<a?(100==a?($(".game-end .winner-ultimate").show(),$(".game-end .p1result").css({color:"#000","background-color":"yellow","border-color":"yellow"}),$(".game-end .p2result").css({"background-color":"#000","border-color":"#000"})):($(".game-end .winner").show(),$(".game-end .p1result").css({"background-color":"#28B446","border-color":"#28B446"}),$(".game-end .p2result").css({"background-color":"#B42828","border-color":"#B42828"})),db.get("users/".concat(auth.user().uid)).then(function(t){db.update("users/".concat(auth.user().uid),{exp:t.val().exp+a,wins:t.val().wins+1})})):a==o?($(".game-end .equal").show(),$(".game-end .p1result").css({color:"#000","background-color":"#ccc","border-color":"#ccc"}),$(".game-end .p2result").css({color:"#000","background-color":"#ccc","border-color":"#ccc"}),db.get("users/".concat(auth.user().uid)).then(function(t){db.update("users/".concat(auth.user().uid),{exp:t.val().exp+a,equals:t.val().equals+1})})):($(".game-end .loser").show(),$(".game-end .p1result").css({"background-color":"#B42828","border-color":"#B42828"}),$(".game-end .p2result").css({"background-color":"#28B446","border-color":"#28B446"}),db.get("users/".concat(auth.user().uid)).then(function(t){db.update("users/".concat(auth.user().uid),{exp:t.val().exp+a,loses:t.val().loses+1})})),$(".p1result h3").text("".concat(a," نقطة")),$(".p1result img").attr("src",i),$(".p2result h3").text("".concat(o," نقطة")),$(".p2result img").attr("src",l),db.update("rooms/".concat(s),{playerOne:null,playerOneScore:null})}else if(2==r){$(".p2result i.addThisFriend").remove(),$(".p1result i.meUser").remove(),$(".p1result").attr("id",t);var a=Number($(".player-two-score .score").text()),o=Number($(".player-one-score .score").text());o<a?(100==a?($(".game-end .winner-ultimate").show(),$(".game-end .p1result").css({"background-color":"#000","border-color":"#000"}),$(".game-end .p2result").css({color:"#000","background-color":"yellow","border-color":"yellow"})):($(".game-end .winner").show(),$(".game-end .p1result").css({"background-color":"#B42828","border-color":"#B42828"}),$(".game-end .p2result").css({"background-color":"#28B446","border-color":"#28B446"})),db.get("users/".concat(auth.user().uid)).then(function(t){db.update("users/".concat(auth.user().uid),{exp:t.val().exp+a,wins:t.val().wins+1})})):a==o?($(".game-end .equal").show(),$(".game-end .p1result").css({color:"#000","background-color":"#ccc","border-color":"#ccc"}),$(".game-end .p2result").css({color:"#000","background-color":"#ccc","border-color":"#ccc"}),db.get("users/".concat(auth.user().uid)).then(function(t){db.update("users/".concat(auth.user().uid),{exp:t.val().exp+a,equals:t.val().equals+1})})):($(".game-end .loser").show(),$(".game-end .p1result").css({"background-color":"#28B446","border-color":"#28B446"}),$(".game-end .p2result").css({"background-color":"#B42828","border-color":"#B42828"}),db.get("users/".concat(auth.user().uid)).then(function(t){db.update("users/".concat(auth.user().uid),{exp:t.val().exp+a,loses:t.val().loses+1})})),$(".p1result h3").text("".concat(o," نقطة")),$(".p1result img").attr("src",i),$(".p2result h3").text("".concat(a," نقطة")),$(".p2result img").attr("src",l),db.update("rooms/".concat(s),{playerTwo:null,playerTwoScore:null})}}(o.playerOne,o.playerTwo))},1e3)}}})}config({apiKey:"AIzaSyDaX6oEVx_3ZhRkuNaMBqpG7WIuzoyiCN0",authDomain:"smart-challange.firebaseapp.com",databaseURL:"https://smart-challange.firebaseio.com",projectId:"smart-challange",storageBucket:"smart-challange.appspot.com",messagingSenderId:"235103928809"}),auth.onLoggedIn(function(){$(".preloader").fadeOut()}),auth.onLoggedIn(function(t){t?(db.update("users/".concat(auth.user().uid),{avail:!0}),auth.onDisconnect("users/".concat(auth.user().uid),{avail:!1}),$(".auth").fadeOut(),$(".loading").fadeIn(),setTimeout(function(){$(".auth").remove(),$(".loading").fadeOut(),$(".main-face").fadeIn()},4e3),$(".authName").text(" ".concat(auth.user().displayName," ")),$(".reAuthPic").attr("src"," ".concat(auth.user().photoURL," ")),$(".reAuthPic").addClass("authPic"),$("nav").fadeIn(),$("header").css("border-bottom","0")):($(".edit-modal").remove(),$(".auth").show(),$("nav").fadeOut(),$("header").css("border-bottom","1px solid #ccc"))}),$(".login").click(function(){var t=$("#email-login").val(),e=$("#pass-login").val();auth.login(t,e).then(function(t){Swal.fire({type:"success",text:"تم تسجيل الدخول بنجاح كـ".concat(auth.user().displayName)}).then(function(){$(".login-modal").remove(),$(".signup-modal").remove(),$(".loginGoogle").remove(),location.reload()})}).catch(function(t){Swal.fire({type:"error",title:"Oops...",text:t.message})})}),$(".logout").click(function(){Swal.fire({title:"هل أنت متأكد من أنك تريد تسجيل الخروج؟",type:"question",customClass:{icon:"swal2-arabic-question-mark"},confirmButtonText:"نعم",cancelButtonText:"لا",showCancelButton:!0,showCloseButton:!0}).then(function(t){t.value&&auth.logout().then(location.reload())})}),$(".signup").click(function(){$(this).text("Loading ...");var t=$("#email-signup").val(),e=$("#pass-signup").val(),a=$("#username-signup").val(),o=$("#pic-signup").val();0!=t&&0!=e&&0!=a&&0!=o?auth.signup(t,e).then(function(t){storage.upload("#pic-signup","users/".concat(auth.user().uid,"/profilePic")).then(function(t){auth.updateProfile({displayName:a,photoURL:t}).then(function(){db.add("users/".concat(auth.user().uid),{name:auth.user().displayName,email:auth.user().email,picture:auth.user().photoURL,uid:auth.user().uid,exp:0,wins:0,equals:0,loses:0}).then(function(){Swal.fire({type:"success",text:"تم التسجيل بنجاح كـ".concat(auth.user().displayName)}).then(function(){$(".login-modal").remove(),$(".signup-modal").remove(),$(".loginGoogle").remove()})})})})}).catch(function(t){$(".signup").text("التسجيل"),Swal.fire({type:"error",title:"Oops...",text:t.message})}):($(".signup").text("التسجيل"),Swal.fire({type:"error",title:"Oops...",text:"لا يمكن ترك أي خانة فارغة"}))}),$(".loginGoogle").click(function(){auth.loginWithGoogle().then(function(t){db.get("users").then(function(t){for(var e=Object.values(t.val()),a=0;a<e.length;a++)if(e[a].uid==auth.user().uid)return;db.update("users/".concat(auth.user().uid),{name:auth.user().displayName,email:auth.user().email,picture:auth.user().photoURL,uid:auth.user().uid,exp:0,wins:0,equals:0,loses:0}).then(function(){Swal.fire({type:"success",text:"تم تسجيل الدخول بنجاح كـ".concat(auth.user().displayName)}).then(function(){$(".login-modal").remove(),$(".signup-modal").remove(),$(".loginGoogle").remove()})})})})}),$(".name-edit-btn").click(function(){var t=$("#name-edit").val();0!=t?($(".name-edit-btn").text("جاري التعديل..."),auth.updateProfile({displayName:t}).then(function(){db.update("users/".concat(auth.user().uid),{name:auth.user().displayName}).then(function(){Swal.fire({type:"success",text:"تم تغيير أسم المستخدم بنجاح"}).then(function(){location.reload()})})}).catch(function(t){$(".name-edit-btn").text("تعديل"),Swal.fire({type:"error",title:"Oops...",text:t.message})})):Swal.fire({type:"error",title:"Oops...",text:"لا يمكن ترك الخانة فارغة"})}),$(".pass-edit-btn").click(function(){var t=$("#pass-edit").val();0!=t?($(".pass-edit-btn").text("جاري التعديل..."),auth.updatePassword(t).then(function(){Swal.fire({type:"success",text:"تم تغيير كلمة المرور بنجاح"}).then(function(){location.reload()})}).catch(function(t){$(".pass-edit-btn").text("تعديل"),Swal.fire({type:"error",title:"Oops...",text:t.message})})):Swal.fire({type:"error",title:"Oops...",text:"لا يمكن ترك الخانة فارغة"})}),$(".pic-edit-btn").click(function(){0!=$("#pic-edit").val()?($(".pic-edit-btn").text("جاري رفع الصورة..."),storage.upload("#pic-edit","users/".concat(auth.user().uid,"/profilePic")).then(function(t){auth.updateProfile({photoURL:t}).then(function(){db.update("users/".concat(auth.user().uid),{picture:auth.user().photoURL}).then(function(){Swal.fire({type:"success",text:"تم تغيير الصورة بنجاح"}).then(function(){location.reload()})})})}).catch(function(t){$(".pic-edit-btn").text("تعديل"),Swal.fire({type:"error",title:"Oops...",text:t.message})})):Swal.fire({type:"error",title:"Oops...",text:"يجب اختيار صورة اولاً"})}),auth.onLoggedIn(function(t){t&&db.getting("rooms",function(t){t.forEach(function(t){t.val().playerOne&&t.val().playerTwo?t.val().playerOne==auth.user().uid?auth.onDisconnect("rooms/".concat(t.key),{playerOne:null,playerOneScore:null}):t.val().playerTwo==auth.user().uid&&auth.onDisconnect("rooms/".concat(t.key),{playerTwo:null,playerTwoScore:null}):t.val().playerOne&&!t.val().playerTwo?t.val().playerOne==auth.user().uid&&auth.onDisconnect("rooms/".concat(t.key),{state:"empty",Qstate:"unset",playerOne:null,playerOneScore:null}):!t.val().playerOne&&t.val().playerTwo&&t.val().playerTwo==auth.user().uid&&auth.onDisconnect("rooms/".concat(t.key),{state:"empty",Qstate:"unset",playerTwo:null,playerTwoScore:null}),auth.onDisconnect("users/".concat(auth.user().uid),{requset:null})})})}),$(".challengeDiv").click(function(){function o(){var t=Math.floor(1e14*Math.random());console.log(t),db.add("rooms/".concat(t),{state:"matching",Qstate:"unset",id:t,playerOne:auth.user().uid})}$(this).hide().siblings().hide(),$(".loading").fadeIn(),$(".match").fadeIn(),db.get("rooms").then(function(t){if(t){for(var e=Object.values(t.val()),a=0;a<e.length;a++)if("matching"==e[a].state)return void db.update("rooms/".concat(e[a].id),{state:"full",playerTwo:auth.user().uid});for(a=0;a<e.length;a++)if("empty"==e[a].state)return void db.update("rooms/".concat(e[a].id),{state:"matching",playerOne:auth.user().uid});return o()}return o()}),db.getting("rooms",function(t){t.forEach(function(e){"full"==e.val().state&&e.val().playerOne==auth.user().uid?db.get("users/".concat(e.val().playerTwo)).then(function(t){setTimeout(function(){$(".loading").hide(),$(".game-face").show(),$(".match").hide(),$(".p1img").attr("src",t.val().picture),$(".p1name").text(t.val().name),$(".p2img").attr("src","".concat(auth.user().photoURL)),$(".p2name").text(auth.user().displayName),$(".playerOne").css("transform","translateY(0px)"),$(".playerTwo").css("transform","translateY(0px)"),$("nav").hide(),db.update("rooms/".concat(e.key),{state:"inGame"}).then(function(){setTimeout(function(){startNewGame(e.key,1,t.val().picture,auth.user().photoURL),$(".game-face").hide(),$(".game").show(),$(".player-two-score").html("".concat(t.val().name,': <span class="score">0</span> Point')),$(".player-one-score").html("".concat(auth.user().displayName,': <span class="score">0</span> Point'))},4e3)})},2e3)}):"full"==e.val().state&&e.val().playerTwo==auth.user().uid&&db.get("users/".concat(e.val().playerOne)).then(function(t){setTimeout(function(){$(".loading").hide(),$(".game-face").show(),$(".match").hide(),$(".p1img").attr("src","".concat(auth.user().photoURL)),$(".p1name").text(auth.user().displayName),$(".p2img").attr("src",t.val().picture),$(".p2name").text(t.val().name),$(".playerOne").css("transform","translateY(0px)"),$(".playerTwo").css("transform","translateY(0px)"),$("nav").hide(),db.update("rooms/".concat(e.key),{state:"inGame"}).then(function(){setTimeout(function(){startNewGame(e.key,2,auth.user().photoURL,t.val().picture),$(".game-face").hide(),$(".game").show(),$(".player-two-score").html("".concat(auth.user().displayName,': <span class="score">0</span> Point')),$(".player-one-score").html("".concat(t.val().name,': <span class="score">0</span> Point'))},4e3)})},2e3)})})})}),auth.onLoggedIn(function(t){t&&db.get("users","child","exp").then(function(t){var o=1,e=[];t.forEach(function(t){e.push(t.val())});var n=e.length,c=n;t.forEach(function(t){var e=t.val();if(o==n)var a='\n                    <tr class="'.concat(e.uid,'" style="background:#ffff008a">\n                        <td><img src="images/1st.svg"></td>\n                        <td>').concat(e.name,' <img src="').concat(e.picture,'" class="pimg"></td>\n                        <td>').concat(e.wins,"</td>\n                        <td>").concat(e.equals,"</td>\n                        <td>").concat(e.loses,"</td>\n                        <td>").concat(e.exp,"</td>\n                    </tr>\n                    ");else if(o==n-1)a='\n                    <tr class="'.concat(e.uid,'" style="background:#c0c0c08c">\n                        <td><img src="images/2nd.svg"></td>\n                        <td>').concat(e.name,' <img src="').concat(e.picture,'" class="pimg"></td>\n                        <td>').concat(e.wins,"</td>\n                        <td>").concat(e.equals,"</td>\n                        <td>").concat(e.loses,"</td>\n                        <td>").concat(e.exp,"</td>\n                    </tr>\n                    ");else if(o==n-2)a='\n                    <tr class="'.concat(e.uid,'" style="background:#ff85339c">\n                        <td><img src="images/3rd.svg"></td>\n                        <td>').concat(e.name,' <img src="').concat(e.picture,'" class="pimg"></td>\n                        <td>').concat(e.wins,"</td>\n                        <td>").concat(e.equals,"</td>\n                        <td>").concat(e.loses,"</td>\n                        <td>").concat(e.exp,"</td>\n                    </tr>\n                    ");else a='\n                    <tr class="'.concat(e.uid,'">\n                        <td>').concat(c,"</td>\n                        <td>").concat(e.name,' <img src="').concat(e.picture,'" class="pimg"></td>\n                        <td>').concat(e.wins,"</td>\n                        <td>").concat(e.equals,"</td>\n                        <td>").concat(e.loses,"</td>\n                        <td>").concat(e.exp,"</td>\n                    </tr>\n                    ");c--,o++,$(".general tr:first-child").after(a),19<c&&$(".general tr:nth-child(2)").hide()})}).then(function(){var t=$(".general tr.".concat(auth.user().uid)).clone().show();$(".me-general").html(t)})}),auth.onLoggedIn(function(t){if(t){var o=[];db.get("users/".concat(auth.user().uid)).then(function(t){o.push(t.val()),db.get("users/".concat(auth.user().uid,"/friends")).then(function(t){if(t)t.forEach(function(t){db.get("users/".concat(t.key)).then(function(t){o.push(t.val())}).then(function(){o.sort(function(t,e){return e.exp-t.exp}),$(".friends-ranking-table tr:not(:first-child)").remove();for(var t=0;t<o.length;t++){if(0==t)var e='\n                                    <tr class="'.concat(o[t].uid,'" style="background:#ffff008a">\n                                        <td><img src="images/1st.svg"></td>\n                                        <td>').concat(o[t].name,' <img src="').concat(o[t].picture,'" class="pimg"></td>\n                                        <td>').concat(o[t].wins,"</td>\n                                        <td>").concat(o[t].equals,"</td>\n                                        <td>").concat(o[t].loses,"</td>\n                                        <td>").concat(o[t].exp,"</td>\n                                    </tr>\n                                    ");else if(1==t)e='\n                                    <tr class="'.concat(o[t].uid,'" style="background:#c0c0c08c">\n                                        <td><img src="images/2nd.svg"></td>\n                                        <td>').concat(o[t].name,' <img src="').concat(o[t].picture,'" class="pimg"></td>\n                                        <td>').concat(o[t].wins,"</td>\n                                        <td>").concat(o[t].equals,"</td>\n                                        <td>").concat(o[t].loses,"</td>\n                                        <td>").concat(o[t].exp,"</td>\n                                    </tr>\n                                    ");else if(2==t)e='\n                                    <tr class="'.concat(o[t].uid,'" style="background:#ff85339c">\n                                        <td><img src="images/3rd.svg"></td>\n                                        <td>').concat(o[t].name,' <img src="').concat(o[t].picture,'" class="pimg"></td>\n                                        <td>').concat(o[t].wins,"</td>\n                                        <td>").concat(o[t].equals,"</td>\n                                        <td>").concat(o[t].loses,"</td>\n                                        <td>").concat(o[t].exp,"</td>\n                                    </tr>\n                                    ");else e='\n                                    <tr class="'.concat(o[t].uid,'">\n                                        <td>').concat(t+1,"</td>\n                                        <td>").concat(o[t].name,' <img src="').concat(o[t].picture,'" class="pimg"></td>\n                                        <td>').concat(o[t].wins,"</td>\n                                        <td>").concat(o[t].equals,"</td>\n                                        <td>").concat(o[t].loses,"</td>\n                                        <td>").concat(o[t].exp,"</td>\n                                    </tr>\n                                    ");$(".friends-ranking-table").append(e),19<t&&$(".friends-ranking-table tr:last-child").hide();var a=$(".friends-ranking-table tr.".concat(auth.user().uid)).clone().show();$(".me-friend").html(a),1<$(".me-friend tr").length&&$(".me-friend tr:not(:first-child)").remove()}})});else{$(".friends").append('\n                            <tr>\n                                <td colspan="6">لا يوجد أصدقاء حتى الان</td>\n                            </tr>\n                            ')}})})}}),auth.onLoggedIn(function(t){t&&$(".friendListDiv").click(function(){$(".friends-table tr:not(:first-child)").remove(),db.get("users/".concat(auth.user().uid,"/friends")).then(function(t){t?(t.forEach(function(t){var e=t.val().ID;db.get("users/".concat(e)).then(function(t){if(t.val().avail)var e='<tr class="'.concat(t.key,'">\n                                            <td>').concat(t.val().name,' <img class="pimg" src="').concat(t.val().picture,'"></td>\n                                            <td>').concat(t.val().exp,'</td>\n                                            <td><img src="images/challengeFriend.svg" title="Challenge" class="challange-start" id="').concat(t.key,'"></td>\n                                        </tr>');else e='<tr class="'.concat(t.key,'">\n                                            <td>').concat(t.val().name,' <img class="pimg" src="').concat(t.val().picture,'"></td>\n                                            <td>').concat(t.val().exp,'</td>\n                                            <td><img src="images/no-friends.svg" title="Not Available"></td>\n                                        </tr>');$(".friends-table").append(e)})}),$(".friends-table").on("click",".challange-start",function(){var t=$(".challange-start").attr("id"),e=Math.floor(1e14*Math.random());db.update("users/".concat(t,"/requset"),{id:auth.user().uid,room:e}).then(function(){$(".challengeDiv").hide().siblings().hide(),$(".main-face").fadeIn(),$(".friend-list").hide(),$(".loading").fadeIn(),$(".match").fadeIn(),$(".match h2").html('بإنتظار قبول طلب التحدي\n                            <br><button onclick="location.reload()">إنسحاب</button>'),db.add("rooms/".concat(e),{state:"matching",Qstate:"unset",id:e,playerOne:auth.user().uid}).then(function(){db.getting("rooms/".concat(e),function(e){"full"==e.val().state&&db.get("users/".concat(e.val().playerTwo)).then(function(t){setTimeout(function(){$(".loading").hide(),$(".game-face").show(),$(".match").hide(),$(".p1img").attr("src",t.val().picture),$(".p1name").text(t.val().name),$(".p2img").attr("src","".concat(auth.user().photoURL)),$(".p2name").text(auth.user().displayName),$(".playerOne").css("transform","translateY(0px)"),$(".playerTwo").css("transform","translateY(0px)"),$("nav").hide(),db.update("rooms/".concat(e.key),{state:"inGame"}).then(function(){setTimeout(function(){startNewGame(e.key,1,t.val().picture,auth.user().photoURL),$(".game-face").hide(),$(".game").show(),$(".player-two-score").html("".concat(t.val().name,': <span class="score">0</span> Point')),$(".player-one-score").html("".concat(auth.user().displayName,': <span class="score">0</span> Point'))},4e3)})},2e3)})})})})})):($(".friends").hide(),$(".noFriends").show())})})}),auth.onLoggedIn(function(t){t&&$(".search-btn").click(function(){var e=$("#search-input").val();db.get("users").then(function(t){t.forEach(function(t){$(".result-table tr:not(:first-child)").remove(),t.val().uid!=auth.user().uid?t.val().email==e&&($(".add-friend-modal h4").show(),$(".result-table").show(),$(".noResults").hide(),$("#search-input").val(""),db.get("users/".concat(t.val().uid)).then(function(t){var e="\n                                        <tr>\n                                            <td>".concat(t.val().name,' <img class="pimg" src="').concat(t.val().picture,'"></td>\n                                            <td>').concat(t.val().exp,'</td>\n                                            <td><i class="fas fa-plus-circle addThis" title="Add A Friend" id="').concat(t.val().uid,'"></i></td>\n                                        </tr>');$(".result-table").append(e),$(".result-table tr").on("click",".addThis",function(){var t=$(this).parent(),e=$(this).attr("id");db.add("users/".concat(auth.user().uid,"/friends/").concat(e),{ID:e}).then(function(){t.html("ADDED"),$(".friends-table tr:not(:first-child)").remove(),db.get("users/".concat(auth.user().uid,"/friends")).then(function(t){t.forEach(function(t){var e=t.val().ID;db.get("users/".concat(e)).then(function(t){if(t.val().avail)var e="<tr>\n                                                                    <td>".concat(t.val().name,' <img class="pimg" src="').concat(t.val().picture,'"></td>\n                                                                    <td>').concat(t.val().exp,'</td>\n                                                                    <td><img src="images/challengeFriend.svg" title="Challenge" class="challange-start" id="').concat(t.key,'"></td>\n                                                                </tr>');else e='<tr class="'.concat(t.key,'">\n                                                                    <td>').concat(t.val().name,' <img class="pimg" src="').concat(t.val().picture,'"></td>\n                                                                    <td>').concat(t.val().exp,'</td>\n                                                                    <td><img src="images/no-friends.svg" title="Not Available"></td>\n                                                                </tr>');$(".friends-table").append(e)})})})})})})):0==$(".result-table tr:nth-child(2)").length&&($(".noResults").show(),$(".result-table").hide())})})})}),auth.onLoggedIn(function(t){t&&db.getting("users/".concat(auth.user().uid,"/requset"),function(e){e.val()&&"none"==$(".game").css("display")&&db.get("users/".concat(e.val().id)).then(function(t){$(".game-request").show(),$(".game-request .body img").attr("src",t.val().picture),$(".game-request .body h4").text(t.val().name),$(".game-request .body span").text(t.val().name),$(".cancel").click(function(){db.update("users/".concat(auth.user().uid),{requset:null})}),$(".accept").click(function(){db.update("rooms/".concat(e.val().room),{state:"full",playerTwo:auth.user().uid}).then(function(){$(".challengeDiv").hide().siblings().hide(),$(".friend-list").hide(),$(".rankings-section").hide(),$(".settings-section").hide(),$(".game-request").hide(),$(".loading").fadeIn(),$(".match").fadeIn(),setTimeout(function(){$(".loading").hide(),$(".main-face").show(),$(".game-face").show(),$(".match").hide(),$(".p1img").attr("src","".concat(auth.user().photoURL)),$(".p1name").text(auth.user().displayName),$(".p2img").attr("src",t.val().picture),$(".p2name").text(t.val().name),$(".playerOne").css("transform","translateY(0px)"),$(".playerTwo").css("transform","translateY(0px)"),$("nav").hide(),db.update("users/".concat(auth.user().uid),{requset:null}),db.update("rooms/".concat(e.val().room),{state:"inGame"}).then(function(){setTimeout(function(){startNewGame(e.val().room,2,auth.user().photoURL,t.val().picture),$(".game-face").hide(),$(".game").show(),$(".player-two-score").html("".concat(auth.user().displayName,': <span class="score">0</span> Point')),$(".player-one-score").html("".concat(t.val().name,': <span class="score">0</span> Point'))},4e3)})},2e3)})})})})}),$(".addThisFriend").on("click",function(){var t=$(this).parent().attr("id");db.add("users/".concat(auth.user().uid,"/friends/").concat(t),{ID:t}).then(function(){Swal.fire({type:"success",text:"تمت إضافة المنافس إلى قائمة الاصدقاء بنجاح!"})})});